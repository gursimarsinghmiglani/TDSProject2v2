"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api";
exports.ids = ["pages/api"];
exports.modules = {

/***/ "(pages-dir-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Findex.js&middlewareConfigBase64=e30%3D!":
/*!********************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Findex.js&middlewareConfigBase64=e30%3D! ***!
  \********************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/pages-api/module.compiled */ \"(pages-dir-node)/./node_modules/next/dist/server/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(pages-dir-node)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(pages-dir-node)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_index_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages/api/index.js */ \"(pages-dir-node)/./pages/api/index.js\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_index_js__WEBPACK_IMPORTED_MODULE_3__, 'default'));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_index_js__WEBPACK_IMPORTED_MODULE_3__, 'config');\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api\",\n        pathname: \"/api\",\n        // The following aren't used in production.\n        bundlePath: '',\n        filename: ''\n    },\n    userland: _pages_api_index_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvYnVpbGQvd2VicGFjay9sb2FkZXJzL25leHQtcm91dGUtbG9hZGVyL2luZGV4LmpzP2tpbmQ9UEFHRVNfQVBJJnBhZ2U9JTJGYXBpJnByZWZlcnJlZFJlZ2lvbj0mYWJzb2x1dGVQYWdlUGF0aD0uJTJGcGFnZXMlMkZhcGklMkZpbmRleC5qcyZtaWRkbGV3YXJlQ29uZmlnQmFzZTY0PWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBK0Y7QUFDdkM7QUFDRTtBQUMxRDtBQUNpRDtBQUNqRDtBQUNBLGlFQUFlLHdFQUFLLENBQUMsZ0RBQVEsWUFBWSxFQUFDO0FBQzFDO0FBQ08sZUFBZSx3RUFBSyxDQUFDLGdEQUFRO0FBQ3BDO0FBQ08sd0JBQXdCLHlHQUFtQjtBQUNsRDtBQUNBLGNBQWMsa0VBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxZQUFZO0FBQ1osQ0FBQzs7QUFFRCIsInNvdXJjZXMiOlsiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBhZ2VzQVBJUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1tb2R1bGVzL3BhZ2VzLWFwaS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IGhvaXN0IH0gZnJvbSBcIm5leHQvZGlzdC9idWlsZC90ZW1wbGF0ZXMvaGVscGVyc1wiO1xuLy8gSW1wb3J0IHRoZSB1c2VybGFuZCBjb2RlLlxuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi4vcGFnZXMvYXBpL2luZGV4LmpzXCI7XG4vLyBSZS1leHBvcnQgdGhlIGhhbmRsZXIgKHNob3VsZCBiZSB0aGUgZGVmYXVsdCBleHBvcnQpLlxuZXhwb3J0IGRlZmF1bHQgaG9pc3QodXNlcmxhbmQsICdkZWZhdWx0Jyk7XG4vLyBSZS1leHBvcnQgY29uZmlnLlxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IGhvaXN0KHVzZXJsYW5kLCAnY29uZmlnJyk7XG4vLyBDcmVhdGUgYW5kIGV4cG9ydCB0aGUgcm91dGUgbW9kdWxlIHRoYXQgd2lsbCBiZSBjb25zdW1lZC5cbmV4cG9ydCBjb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBQYWdlc0FQSVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5QQUdFU19BUEksXG4gICAgICAgIHBhZ2U6IFwiL2FwaVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpXCIsXG4gICAgICAgIC8vIFRoZSBmb2xsb3dpbmcgYXJlbid0IHVzZWQgaW4gcHJvZHVjdGlvbi5cbiAgICAgICAgYnVuZGxlUGF0aDogJycsXG4gICAgICAgIGZpbGVuYW1lOiAnJ1xuICAgIH0sXG4gICAgdXNlcmxhbmRcbn0pO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYWdlcy1hcGkuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(pages-dir-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Findex.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(pages-dir-node)/./pages/api/index.js":
/*!****************************!*\
  !*** ./pages/api/index.js ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var formidable__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! formidable */ \"formidable\");\n/* harmony import */ var formidable__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(formidable__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var unzipper__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! unzipper */ \"unzipper\");\n/* harmony import */ var unzipper__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(unzipper__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var csv_parser__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! csv-parser */ \"csv-parser\");\n/* harmony import */ var csv_parser__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(csv_parser__WEBPACK_IMPORTED_MODULE_4__);\n\n\n\n\n\nconst config = {\n    api: {\n        bodyParser: false\n    }\n};\nasync function handler(req, res) {\n    if (req.method !== 'POST') {\n        return res.status(405).json({\n            error: 'Method not allowed'\n        });\n    }\n    const form = new (formidable__WEBPACK_IMPORTED_MODULE_0___default().IncomingForm)();\n    form.parse(req, async (err, fields, files)=>{\n        if (err) return res.status(500).json({\n            error: 'Failed to parse form data'\n        });\n        const question = fields.question;\n        if (!question) return res.status(400).json({\n            error: 'Missing question field'\n        });\n        let extractedContent = '';\n        if (files.file) {\n            try {\n                const filePath = files.file.filepath || files.file.path;\n                const fileName = files.file.originalFilename || files.file.newFilename || files.file.name;\n                const fileExtension = path__WEBPACK_IMPORTED_MODULE_2___default().extname(fileName).toLowerCase();\n                const tempDir = path__WEBPACK_IMPORTED_MODULE_2___default().join('/tmp', 'extract_' + Date.now());\n                fs__WEBPACK_IMPORTED_MODULE_1___default().mkdirSync(tempDir, {\n                    recursive: true\n                });\n                if (fileExtension === '.zip') {\n                    await new Promise((resolve, reject)=>{\n                        fs__WEBPACK_IMPORTED_MODULE_1___default().createReadStream(filePath).pipe(unzipper__WEBPACK_IMPORTED_MODULE_3___default().Extract({\n                            path: tempDir\n                        })).on('close', resolve).on('error', reject);\n                    });\n                } else {\n                    fs__WEBPACK_IMPORTED_MODULE_1___default().copyFileSync(filePath, path__WEBPACK_IMPORTED_MODULE_2___default().join(tempDir, fileName));\n                }\n                const filesInDir = fs__WEBPACK_IMPORTED_MODULE_1___default().readdirSync(tempDir);\n                const csvFile = filesInDir.find((f)=>f.endsWith('.csv'));\n                if (csvFile) {\n                    const csvPath = path__WEBPACK_IMPORTED_MODULE_2___default().join(tempDir, csvFile);\n                    extractedContent = await new Promise((resolve, reject)=>{\n                        const results = [];\n                        fs__WEBPACK_IMPORTED_MODULE_1___default().createReadStream(csvPath).pipe(csv_parser__WEBPACK_IMPORTED_MODULE_4___default()()).on('data', (row)=>results.push(row)).on('end', ()=>resolve(JSON.stringify(results))).on('error', reject);\n                    });\n                }\n            } catch (err) {\n                console.error(err);\n                return res.status(500).json({\n                    error: 'File processing error'\n                });\n            }\n        }\n        const prompt = extractedContent ? `${question}\\n\\nExtracted file content: ${extractedContent}\\n\\nRespond with only a single numeric answer.` : `${question}\\n\\nRespond with only a single numeric answer.`;\n        try {\n            const completionRes = await fetch(process.env.AI_PROXY_URL, {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                    'Authorization': `Bearer ${process.env.AI_PROXY_TOKEN}`\n                },\n                body: JSON.stringify({\n                    model: 'gpt-4o-mini',\n                    messages: [\n                        {\n                            role: 'user',\n                            content: prompt\n                        }\n                    ],\n                    temperature: 0.0\n                })\n            });\n            const data = await completionRes.json();\n            const answer = data.choices?.[0]?.message?.content?.trim().match(/\\d+/)?.[0] || 'No numeric answer returned';\n            return res.status(200).json({\n                answer\n            });\n        } catch (apiErr) {\n            console.error(apiErr);\n            return res.status(500).json({\n                error: 'AI API call failed'\n            });\n        }\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QThDLENBQUM7UUFFMU0sSUFBSTtZQUNBLE1BQU13QyxnQkFBZ0IsTUFBTUMsTUFBTUMsUUFBUUMsR0FBRyxDQUFDQyxZQUFZLEVBQUU7Z0JBQ3hEdEQsUUFBUTtnQkFDUnVELFNBQVM7b0JBQ0wsZ0JBQWdCO29CQUNoQixpQkFBaUIsQ0FBQyxPQUFPLEVBQUVILFFBQVFDLEdBQUcsQ0FBQ0csY0FBYyxFQUFFO2dCQUMzRDtnQkFDQUMsTUFBTVgsS0FBS0MsU0FBUyxDQUFDO29CQUNqQlcsT0FBTztvQkFDUEMsVUFBVTt3QkFBQzs0QkFBRUMsTUFBTTs0QkFBUUMsU0FBU1o7d0JBQU87cUJBQUU7b0JBQzdDYSxhQUFhO2dCQUNqQjtZQUNKO1lBRUEsTUFBTUMsT0FBTyxNQUFNYixjQUFjaEQsSUFBSTtZQUNyQyxNQUFNOEQsU0FBU0QsS0FBS0UsT0FBTyxFQUFFLENBQUMsRUFBRSxFQUFFQyxTQUFTTCxTQUFTTSxPQUFPQyxNQUFNLFFBQVEsQ0FBQyxFQUFFLElBQUk7WUFDaEYsT0FBT3JFLElBQUlFLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7Z0JBQUU4RDtZQUFPO1FBQ3pDLEVBQUUsT0FBT0ssUUFBUTtZQUNickIsUUFBUTdDLEtBQUssQ0FBQ2tFO1lBQ2QsT0FBT3RFLElBQUlFLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7Z0JBQUVDLE9BQU87WUFBcUI7UUFDOUQ7SUFDSjtBQUNKIiwic291cmNlcyI6WyIvVXNlcnMvZ3Vyc2ltYXJzaW5naG1pZ2xhbmkvaWl0bS90ZHMvcHJvajIvcGFnZXMvYXBpL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBmb3JtaWRhYmxlIGZyb20gJ2Zvcm1pZGFibGUnO1xuaW1wb3J0IGZzIGZyb20gJ2ZzJztcbmltcG9ydCBwYXRoIGZyb20gJ3BhdGgnO1xuaW1wb3J0IHVuemlwcGVyIGZyb20gJ3VuemlwcGVyJztcbmltcG9ydCBjc3ZQYXJzZXIgZnJvbSAnY3N2LXBhcnNlcic7XG5cbmV4cG9ydCBjb25zdCBjb25maWcgPSB7XG4gICAgYXBpOiB7XG4gICAgICAgIGJvZHlQYXJzZXI6IGZhbHNlLFxuICAgIH0sXG59O1xuXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBoYW5kbGVyKHJlcSwgcmVzKSB7XG4gICAgaWYgKHJlcS5tZXRob2QgIT09ICdQT1NUJykge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDUpLmpzb24oeyBlcnJvcjogJ01ldGhvZCBub3QgYWxsb3dlZCcgfSk7XG4gICAgfVxuXG4gICAgY29uc3QgZm9ybSA9IG5ldyBmb3JtaWRhYmxlLkluY29taW5nRm9ybSgpO1xuXG4gICAgZm9ybS5wYXJzZShyZXEsIGFzeW5jIChlcnIsIGZpZWxkcywgZmlsZXMpID0+IHtcbiAgICAgICAgaWYgKGVycikgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6ICdGYWlsZWQgdG8gcGFyc2UgZm9ybSBkYXRhJyB9KTtcblxuICAgICAgICBjb25zdCBxdWVzdGlvbiA9IGZpZWxkcy5xdWVzdGlvbjtcbiAgICAgICAgaWYgKCFxdWVzdGlvbikgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdNaXNzaW5nIHF1ZXN0aW9uIGZpZWxkJyB9KTtcblxuICAgICAgICBsZXQgZXh0cmFjdGVkQ29udGVudCA9ICcnO1xuXG4gICAgICAgIGlmIChmaWxlcy5maWxlKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGZpbGVQYXRoID0gZmlsZXMuZmlsZS5maWxlcGF0aCB8fCBmaWxlcy5maWxlLnBhdGg7XG4gICAgICAgICAgICAgICAgY29uc3QgZmlsZU5hbWUgPSBmaWxlcy5maWxlLm9yaWdpbmFsRmlsZW5hbWUgfHwgZmlsZXMuZmlsZS5uZXdGaWxlbmFtZSB8fCBmaWxlcy5maWxlLm5hbWU7XG4gICAgICAgICAgICAgICAgY29uc3QgZmlsZUV4dGVuc2lvbiA9IHBhdGguZXh0bmFtZShmaWxlTmFtZSkudG9Mb3dlckNhc2UoKTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IHRlbXBEaXIgPSBwYXRoLmpvaW4oJy90bXAnLCAnZXh0cmFjdF8nICsgRGF0ZS5ub3coKSk7XG4gICAgICAgICAgICAgICAgZnMubWtkaXJTeW5jKHRlbXBEaXIsIHsgcmVjdXJzaXZlOiB0cnVlIH0pO1xuXG4gICAgICAgICAgICAgICAgaWYgKGZpbGVFeHRlbnNpb24gPT09ICcuemlwJykge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmcy5jcmVhdGVSZWFkU3RyZWFtKGZpbGVQYXRoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5waXBlKHVuemlwcGVyLkV4dHJhY3QoeyBwYXRoOiB0ZW1wRGlyIH0pKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5vbignY2xvc2UnLCByZXNvbHZlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5vbignZXJyb3InLCByZWplY3QpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBmcy5jb3B5RmlsZVN5bmMoZmlsZVBhdGgsIHBhdGguam9pbih0ZW1wRGlyLCBmaWxlTmFtZSkpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGNvbnN0IGZpbGVzSW5EaXIgPSBmcy5yZWFkZGlyU3luYyh0ZW1wRGlyKTtcbiAgICAgICAgICAgICAgICBjb25zdCBjc3ZGaWxlID0gZmlsZXNJbkRpci5maW5kKGYgPT4gZi5lbmRzV2l0aCgnLmNzdicpKTtcblxuICAgICAgICAgICAgICAgIGlmIChjc3ZGaWxlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNzdlBhdGggPSBwYXRoLmpvaW4odGVtcERpciwgY3N2RmlsZSk7XG4gICAgICAgICAgICAgICAgICAgIGV4dHJhY3RlZENvbnRlbnQgPSBhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZXN1bHRzID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICBmcy5jcmVhdGVSZWFkU3RyZWFtKGNzdlBhdGgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnBpcGUoY3N2UGFyc2VyKCkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLm9uKCdkYXRhJywgcm93ID0+IHJlc3VsdHMucHVzaChyb3cpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5vbignZW5kJywgKCkgPT4gcmVzb2x2ZShKU09OLnN0cmluZ2lmeShyZXN1bHRzKSkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLm9uKCdlcnJvcicsIHJlamVjdCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogJ0ZpbGUgcHJvY2Vzc2luZyBlcnJvcicgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBwcm9tcHQgPSBleHRyYWN0ZWRDb250ZW50ID8gYCR7cXVlc3Rpb259XFxuXFxuRXh0cmFjdGVkIGZpbGUgY29udGVudDogJHtleHRyYWN0ZWRDb250ZW50fVxcblxcblJlc3BvbmQgd2l0aCBvbmx5IGEgc2luZ2xlIG51bWVyaWMgYW5zd2VyLmAgOiBgJHtxdWVzdGlvbn1cXG5cXG5SZXNwb25kIHdpdGggb25seSBhIHNpbmdsZSBudW1lcmljIGFuc3dlci5gO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBjb21wbGV0aW9uUmVzID0gYXdhaXQgZmV0Y2gocHJvY2Vzcy5lbnYuQUlfUFJPWFlfVVJMLCB7XG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6IGBCZWFyZXIgJHtwcm9jZXNzLmVudi5BSV9QUk9YWV9UT0tFTn1gLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgICAgICBtb2RlbDogJ2dwdC00by1taW5pJyxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZXM6IFt7IHJvbGU6ICd1c2VyJywgY29udGVudDogcHJvbXB0IH1dLFxuICAgICAgICAgICAgICAgICAgICB0ZW1wZXJhdHVyZTogMC4wLFxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IGNvbXBsZXRpb25SZXMuanNvbigpO1xuICAgICAgICAgICAgY29uc3QgYW5zd2VyID0gZGF0YS5jaG9pY2VzPy5bMF0/Lm1lc3NhZ2U/LmNvbnRlbnQ/LnRyaW0oKS5tYXRjaCgvXFxkKy8pPy5bMF0gfHwgJ05vIG51bWVyaWMgYW5zd2VyIHJldHVybmVkJztcbiAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7IGFuc3dlciB9KTtcbiAgICAgICAgfSBjYXRjaCAoYXBpRXJyKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGFwaUVycik7XG4gICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogJ0FJIEFQSSBjYWxsIGZhaWxlZCcgfSk7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cbiJdLCJuYW1lcyI6WyJmb3JtaWRhYmxlIiwiZnMiLCJwYXRoIiwidW56aXBwZXIiLCJjc3ZQYXJzZXIiLCJjb25maWciLCJhcGkiLCJib2R5UGFyc2VyIiwiaGFuZGxlciIsInJlcSIsInJlcyIsIm1ldGhvZCIsInN0YXR1cyIsImpzb24iLCJlcnJvciIsImZvcm0iLCJJbmNvbWluZ0Zvcm0iLCJwYXJzZSIsImVyciIsImZpZWxkcyIsImZpbGVzIiwicXVlc3Rpb24iLCJleHRyYWN0ZWRDb250ZW50IiwiZmlsZSIsImZpbGVQYXRoIiwiZmlsZXBhdGgiLCJmaWxlTmFtZSIsIm9yaWdpbmFsRmlsZW5hbWUiLCJuZXdGaWxlbmFtZSIsIm5hbWUiLCJmaWxlRXh0ZW5zaW9uIiwiZXh0bmFtZSIsInRvTG93ZXJDYXNlIiwidGVtcERpciIsImpvaW4iLCJEYXRlIiwibm93IiwibWtkaXJTeW5jIiwicmVjdXJzaXZlIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJjcmVhdGVSZWFkU3RyZWFtIiwicGlwZSIsIkV4dHJhY3QiLCJvbiIsImNvcHlGaWxlU3luYyIsImZpbGVzSW5EaXIiLCJyZWFkZGlyU3luYyIsImNzdkZpbGUiLCJmaW5kIiwiZiIsImVuZHNXaXRoIiwiY3N2UGF0aCIsInJlc3VsdHMiLCJyb3ciLCJwdXNoIiwiSlNPTiIsInN0cmluZ2lmeSIsImNvbnNvbGUiLCJwcm9tcHQiLCJjb21wbGV0aW9uUmVzIiwiZmV0Y2giLCJwcm9jZXNzIiwiZW52IiwiQUlfUFJPWFlfVVJMIiwiaGVhZGVycyIsIkFJX1BST1hZX1RPS0VOIiwiYm9keSIsIm1vZGVsIiwibWVzc2FnZXMiLCJyb2xlIiwiY29udGVudCIsInRlbXBlcmF0dXJlIiwiZGF0YSIsImFuc3dlciIsImNob2ljZXMiLCJtZXNzYWdlIiwidHJpbSIsIm1hdGNoIiwiYXBpRXJyIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(pages-dir-node)/./pages/api/index.js\n");

/***/ }),

/***/ "csv-parser":
/*!*****************************!*\
  !*** external "csv-parser" ***!
  \*****************************/
/***/ ((module) => {

module.exports = require("csv-parser");

/***/ }),

/***/ "formidable":
/*!*****************************!*\
  !*** external "formidable" ***!
  \*****************************/
/***/ ((module) => {

module.exports = require("formidable");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "unzipper":
/*!***************************!*\
  !*** external "unzipper" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("unzipper");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(pages-dir-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Findex.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();